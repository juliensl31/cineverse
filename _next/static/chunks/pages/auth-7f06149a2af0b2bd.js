(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{2304:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth",function(){return a(7337)}])},5818:(e,s,a)=>{"use strict";a.d(s,{Z:()=>i});var r=a(5893);a(7294);var t=a(9008),n=a.n(t);function i(e){let{title:s,description:a,image:t}=e,i=a?.slice(0,155)+"...",l=`${s} | Cin\xe9Verse`;return(0,r.jsxs)(n(),{children:[(0,r.jsx)("title",{children:l}),(0,r.jsx)("meta",{name:"description",content:i}),(0,r.jsx)("meta",{property:"og:title",content:l}),(0,r.jsx)("meta",{property:"og:description",content:i}),(0,r.jsx)("meta",{property:"og:image",content:t}),(0,r.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,r.jsx)("meta",{name:"twitter:image",content:t})]})}},6517:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});var r=a(5893);let t=()=>(0,r.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})})},7337:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var r=a(5893),t=a(6517),n=a(7294),i=a(3301),l=a(1163);let m=(e,s)=>{let a=!0;return s.required&&(a=""!==e.trim()&&a),s.minLength&&(a=e.length>=s.minLength&&a),s.maxLength&&(a=e.length<=s.maxLength&&a),s.email&&(a=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)&&a),s.hasUpperCase&&(a=/[A-Z]/.test(e)&&a),s.hasLowerCase&&(a=/[a-z]/.test(e)&&a),s.hasSpecialChar&&(a=/[!@#$%^&*(),.?":{}|<>]/.test(e)&&a),a};var d=a(5818);let o=()=>{let[e,s]=(0,n.useState)(!0),[a,o]=(0,n.useState)({email:"",password:"",username:"",confirmPassword:""}),[c,u]=(0,n.useState)(""),[p,x]=(0,n.useState)({}),[h,g]=(0,n.useState)(!1),{login:j,signup:b}=(0,i.a)(),w=(0,l.useRouter)(),f={email:{required:{value:!0,message:"Ce champ est requis"},email:{value:!0,message:"Email invalide"}},password:{required:{value:!0,message:"Ce champ est requis"},minLength:{value:8,message:"Minimum 8 caract\xe8res requis"},hasUpperCase:{value:!0,message:"Au moins une majuscule requise"},hasLowerCase:{value:!0,message:"Au moins une minuscule requise"},hasSpecialChar:{value:!0,message:'Au moins un caract\xe8re sp\xe9cial requis (!@#$%^&*(),.?":{}|<>)'}},username:{required:{value:!0,message:"Ce champ est requis"},minLength:{value:3,message:"Minimum 3 caract\xe8res requis"},maxLength:{value:20,message:"Maximum 20 caract\xe8res autoris\xe9s"}},confirmPassword:{required:{value:!0,message:"Ce champ est requis"}}},v=e=>{let{name:s,value:a}=e.target;if(o(e=>({...e,[s]:a})),f[s]){let e=f[s],r=m(a,Object.fromEntries(Object.entries(e).map(e=>{let[s,a]=e;return[s,a.value]})));x(a=>({...a,[s]:r?"":N(s,e)}))}},N=(e,s)=>{let r=a[e];for(let[e,a]of Object.entries(s))if(!m(r,{[e]:a.value}))return a.message;return""},y=()=>{let s={},r=!0;return(e?["email","password"]:["email","password","username"]).forEach(e=>{m(a[e],Object.fromEntries(Object.entries(f[e]).map(e=>{let[s,a]=e;return[s,a.value]})))||(s[e]=N(e,f[e]),r=!1)}),e||a.password===a.confirmPassword||(s.confirmPassword="Les mots de passe ne correspondent pas",r=!1),x(s),r},C=async s=>{if(s.preventDefault(),u(""),y()){g(!0);try{e?await j(a.email,a.password):await b(a.email,a.password,a.username),w.push("/")}catch(e){u("auth/wrong-password"===e.code?"Mot de passe incorrect":"auth/user-not-found"===e.code?"Utilisateur non trouv\xe9":"auth/email-already-in-use"===e.code?"Email d\xe9j\xe0 utilis\xe9":"Une erreur est survenue. Veuillez r\xe9essayer.")}finally{g(!1)}}};return(0,r.jsx)("div",{children:h?(0,r.jsx)(t.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{title:"Authentification",description:"Cr\xe9er votre compte",image:"/movie-icon.png"}),(0,r.jsxs)("div",{className:"container mx-auto px-4 pt-24",children:[(0,r.jsxs)("div",{className:"max-w-md mx-auto mb-6 flex gap-4",children:[(0,r.jsx)("button",{onClick:()=>s(!0),className:`flex-1 py-2 rounded-xl transition-all ${e?"btn-gradient":"bg-gray-800/50"}`,children:"Connexion"}),(0,r.jsx)("button",{onClick:()=>s(!1),className:`flex-1 py-2 rounded-xl transition-all ${e?"bg-gray-800/50":"btn-gradient"}`,children:"Inscription"})]}),c&&(0,r.jsx)("div",{className:"max-w-md mx-auto mb-4 p-3 bg-red-500/20 border border-red-500 rounded-xl text-red-200",children:c}),(0,r.jsx)("div",{className:"max-w-md mx-auto bg-gray-800/50 p-6 rounded-xl",children:(0,r.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[!e&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2",children:"Nom d'utilisateur"}),(0,r.jsx)("input",{type:"text",name:"username",value:a.username,onChange:v,className:`w-full p-2 rounded bg-gray-700 ${p.username?"border border-red-500":""}`,placeholder:"Votre nom d'utilisateur"}),p.username&&(0,r.jsx)("p",{className:"text-red-400 text-sm mt-1",children:p.username})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2",children:"Email"}),(0,r.jsx)("input",{type:"email",name:"email",value:a.email,onChange:v,className:`w-full p-2 rounded bg-gray-700 ${p.email?"border border-red-500":""}`,placeholder:"Votre email"}),p.email&&(0,r.jsx)("p",{className:"text-red-400 text-sm mt-1",children:p.email})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2",children:"Mot de passe"}),(0,r.jsx)("input",{type:"password",name:"password",value:a.password,onChange:v,className:`w-full p-2 rounded bg-gray-700 ${p.password?"border border-red-500":""}`,placeholder:"Votre mot de passe"}),p.password&&(0,r.jsx)("p",{className:"text-red-400 text-sm mt-1",children:p.password})]}),!e&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2",children:"Confirmer le mot de passe"}),(0,r.jsx)("input",{type:"password",name:"confirmPassword",value:a.confirmPassword,onChange:v,className:`w-full p-2 rounded bg-gray-700 ${p.confirmPassword?"border border-red-500":""}`,placeholder:"Confirmez votre mot de passe"}),p.confirmPassword&&(0,r.jsx)("p",{className:"text-red-400 text-sm mt-1",children:p.confirmPassword})]}),(0,r.jsx)("button",{type:"submit",className:"w-full btn-gradient py-2 rounded-xl flex items-center justify-center h-10",children:(0,r.jsx)("span",{className:"text-white text-sm font-medium",children:e?"Se connecter":"S'inscrire"})}),!e&&(0,r.jsxs)("div",{className:"mt-4 text-sm text-gray-400 space-y-1",children:[(0,r.jsx)("h4",{className:"font-medium text-white",children:"Le mot de passe doit contenir :"}),(0,r.jsxs)("ul",{className:"list-disc pl-5 space-y-1",children:[(0,r.jsx)("li",{children:"Au moins 8 caract\xe8res"}),(0,r.jsx)("li",{children:"Au moins une lettre majuscule"}),(0,r.jsx)("li",{children:"Au moins une lettre minuscule"}),(0,r.jsxs)("li",{children:['Au moins un caract\xe8re sp\xe9cial (!@#$%^&*(),.?":',"|<>)"]})]})]})]})})]})]})})}},9008:(e,s,a)=>{e.exports=a(3867)}},e=>{var s=s=>e(e.s=s);e.O(0,[888,774,179],()=>s(2304)),_N_E=e.O()}]);